import * as Utils from './utils';

describe('selecting windows and tabs', async () => {

	test('select an inactive tab from a window that is not focused', async () => {

		// given 2 windows, one active, the other one with 2 tabs
		const br = Utils.createFakeBrowserController([{ id: 111, tabs: 1 }, { id: 222, tabs: 2 }]);
		const windows = br.fakeGetWindows();
		const tab1id = windows[1].tabs[1].id;

		const callback = jest.fn();
		br.addEventListener(callback);

		// when selecting the inactive tab in the second window
		await br.selectTab(222, tab1id);

		// expect the following events
		Utils.expectEvents(callback, ['onFocusChanged', 'onTabSelected']);
	});

});